{# D:\Django\MaemohP9\core\templates\core\home.html #}

{% extends "core/base.html" %}
{% load static %}
{% block title %}หน้าหลัก – MaemohMine Project{% endblock %}
{% load group_tags %}

{% block content %}

<!-- Hero Carousel Section -->
<div id="heroCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
  <div class="carousel-inner">
    <!-- Slide 1: เหมืองเปิด + เครื่องจักรใหญ่ -->
    <div 
      class="carousel-item active" 
      style="background-image: url('{% static 'img/home/mine_pit.jpg' %}');"
    >
      <div class="carousel-caption">
        <h1>เหมืองแม่เมาะสัญญา 9 : เปิดพื้นที่เพื่ออนาคต</h1>
        <p>ติดตามวิธีการขุดขนดินและถ่านหินลิกไนต์ด้วยเทคโนโลยีล่าสุด และการจัดการทรัพยากรอย่างยั่งยืน</p>
        <a href="#about" class="btn btn-cta">เรียนรู้เพิ่มเติม</a>
      </div>
    </div>

    <!-- Slide 2: เครื่องจักรขนาดใหญ่ -->
    <div 
      class="carousel-item" 
      style="background-image: url('{% static 'img/home/bwe.jpg' %}');"
    >
      <div class="carousel-caption">
        <h1>ยานยนต์และเครื่องจักรหนัก</h1>
        <p>รถขุด Bucket Wheel Excavator ที่ออกแบบมาเพื่อการขุดดินแบบต่อเนื่องโดยเฉพาะ</p>
        <a href="#services" class="btn btn-cta">ดูบริการของเรา</a>
      </div>
    </div>

    <!-- Slide 3: สายพานลำเลียง -->
    <div 
      class="carousel-item"
      style="background-image: url('{% static 'img/home/conveyor.jpg' %}');"
    >
      <div class="carousel-caption">
        <h1>ระบบสายพานลำเลียงอัตโนมัติ</h1>
        <p>ตรวจสอบและจัดการสายพานเพือลำเลียงดินไปยังที่ทิ้งดิน</p>
        <a href="#services" class="btn btn-cta">ดูบริการของเรา</a>
      </div>
    </div>
  </div>

  <!-- Carousel Controls -->
  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">ก่อนหน้า</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">ถัดไป</span>
  </button>
</div>

<!-- About Section -->
<section id="about" class="about-section">
  <div class="container">
    <div class="row align-items-center gy-4 fade-scroll">
      <div class="col-md-6">
        <h2 class="section-title">เกี่ยวกับโครงการ</h2>
        <p class="text-muted">
          โครงการเหมืองแม่เมาะเป็นโครงการขุดขนดินและถ่านหินลิกไนต์เชิงธุรกิจ ที่เน้นการบริหารทรัพยากรธรรมชาติ
          ควบคู่ไปกับการสร้างพลังงานอย่างมีประสิทธิภาพ โดยยึดหลักความยั่งยืนและความปลอดภัยเป็นสำคัญ
        </p>
        <ul class="list-unstyled ps-3 mt-3">
          <li class="mb-2">
            <i class="fas fa-check-circle text-primary me-2"></i>พื้นที่โครงการ: จังหวัดลำปาง
          </li>
          <li class="mb-2">
            <i class="fas fa-check-circle text-primary me-2"></i>ระยะเวลาสัญญา: 2018 – 2028
          </li>
          <li class="mb-2">
            <i class="fas fa-check-circle text-primary me-2"></i>ปริมาณงานขุดขนดิน: 467 ล้าน ลบ.ม.
          </li>
          <li class="mb-2">
            <i class="fas fa-check-circle text-primary me-2"></i>ปริมาณงานขุดขนถ่านหินลิกไนต์: 35 ล้าน เมตริกตัน
          </li>
          <li class="mb-2">
            <i class="fas fa-check-circle text-primary me-2"></i>ปริมาณงานขุดขนดิน (ส่วนที่ กฟผ ดำเนินการ): 35 ล้าน ลบ.ม.
          </li>
        </ul>
      </div>
      <div class="col-md-6 text-center fade-scroll">
        <img 
          src="{% static 'img/home/power_house.jpg' %}" 
          alt="โครงการเหมืองแม่เมาะ" 
          class="img-fluid rounded shadow-sm"
        >
      </div>
    </div>
  </div>
</section>

<!-- Services Section -->
<section id="services" class="py-5">
  <div class="container">
    <h2 class="text-center section-title fade-scroll">บริการของเรา</h2>
    <div class="row gx-4 gy-4 mt-4">
      {# แสดง Mine Progress เสมอ เพราะเป็นบริการเริ่มต้น #}
      <div class="col-md-4 fade-scroll">
        <div class="card feature-card p-4 text-center h-100">
          <div class="feature-icon"><i class="fas fa-mountain"></i></div>
          <div class="feature-title">Mine Progress</div>
          <p class="feature-text">
            รายงานความคืบหน้าโครงการขุดขนดินและถ่านหินลิกไนต์ พร้อมเอกสารตรวจสอบจากทีมวิศวกรและอาจารย์ผู้เชี่ยวชาญ
          </p>
          <a href="/api/mineprogress/" class="btn btn-outline-primary mt-3">ดูความคืบหน้า</a>
        </div>
      </div>

      {# หากผู้ใช้ล็อกอิน และอยู่ในกลุ่ม cashflow_access ให้แสดงการ์ด Cashflow #}
      {% if user.is_authenticated and user|has_group:"cashflow_access" %}
        <div class="col-md-4 fade-scroll">
          <div class="card feature-card p-4 text-center h-100">
            <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
            <div class="feature-title">Cashflow Forecast</div>
            <p class="feature-text">
              ระบบพยากรณ์และวิเคราะห์กระแสเงินสดโครงการ เพื่อให้การบริหารงบประมาณมีความแม่นยำสูงสุด
            </p>
            <a href="/api/cashflow/" class="btn btn-outline-primary mt-3">ดู Cashflow</a>
          </div>
        </div>
      {% endif %}

      {# หากผู้ใช้ล็อกอิน และอยู่ในกลุ่ม fleet_access ให้แสดงการ์ด Fleet #}
      {% if user.is_authenticated and user|has_group:"fleet_access" %}
        <div class="col-md-4 fade-scroll">
          <div class="card feature-card p-4 text-center h-100">
            <div class="feature-icon"><i class="fas fa-truck-moving"></i></div>
            <div class="feature-title">Fleet Management</div>
            <p class="feature-text">
              ติดตามสถานะรถบรรทุก ตรวจสอบตำแหน่ง GPS และจัดการการใช้งานอย่างเรียลไทม์
            </p>
            <a href="/api/fleet/" class="btn btn-outline-primary mt-3">ดู Fleet</a>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</section>

<!-- Contact / CTA Section -->
<section id="contact" class="py-5 bg-light">
  <div class="container">
    <div class="row align-items-center fade-scroll">
      <div class="col-md-6 mb-4">
        <h2 class="section-title">ร่วมประสานงานกับเรา</h2>
        <p class="text-muted">
          หากต้องการสอบถามข้อมูลเพิ่มเติม หรือต้องการร่วมงานกับโครงการเหมืองแม่เมาะ 
          สามารถกรอกข้อมูลติดต่อได้ที่ด้านล่าง หรือเข้าสู่ระบบเพื่อใช้บริการต่าง ๆ ของเรา
        </p>
        {% if not user.is_authenticated %}
          <a href="{% url 'core:login' %}" class="btn btn-primary me-3">ล็อกอิน</a>
          <a href="{% url 'core:register' %}" class="btn btn-outline-primary">สมัครสมาชิก</a>
        {% endif %}
      </div>
      <div class="col-md-6 fade-scroll">
        <form method="post" action="{% url 'core:contact' %}">
          {% csrf_token %}
          <div class="mb-3">
            <label for="contactName" class="form-label">ชื่อ-นามสกุล</label>
            <input type="text" class="form-control" id="contactName" name="name" placeholder="กรอกชื่อของคุณ">
          </div>
          <div class="mb-3">
            <label for="contactEmail" class="form-label">อีเมล</label>
            <input type="email" class="form-control" id="contactEmail" name="email" placeholder="you@example.com">
          </div>
          <div class="mb-3">
            <label for="contactMessage" class="form-label">ข้อความ</label>
            <textarea class="form-control" id="contactMessage" name="message" rows="4" placeholder="พิมพ์ข้อความของคุณ"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">ส่งข้อความ</button>
        </form>
      </div>
    </div>
  </div>
</section>

{% endblock %}








